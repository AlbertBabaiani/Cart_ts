var f=Object.defineProperty;var g=(s,e,t)=>e in s?f(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>(g(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();const d=class d{constructor(){a(this,"productes",[]);a(this,"deliveryType");this.getLocalStorage()}addToLocalStorage(){localStorage.setItem("cart",JSON.stringify([this.productes,this.deliveryType]))}getLocalStorage(){const e=localStorage.getItem("cart");if(e!==null)try{this.productes=JSON.parse(e)[0],this.deliveryLocalStorage()}catch(t){console.error("Error parsing localStorage data:",t),this.productes=[]}else this.productes=[]}deliveryLocalStorage(){const e=localStorage.getItem("cart");return e!==null?JSON.parse(e)[1].type==="Home"?(this.deliveryType=JSON.parse(e)[1],!0):(this.deliveryType=JSON.parse(e)[0],!1):!1}get getLength(){return this.productes.length}get elements(){return this.productes}reformId(){for(let e=0;e<this.productes.length;e++)this.productes[e].id=e}addProduct(e){this.productes.push(e),this.addToLocalStorage()}removeProduct(e){this.productes=this.productes.filter(t=>t.id!==e),this.reformId(),this.addToLocalStorage()}setDelivery(e){this.deliveryType=e,this.addToLocalStorage()}get getSum(){let e;return this.deliveryType.type==="Home"?e=.25:e=1.75,this.productes.length!==0?this.productes.map(t=>t.price).reduce((t,n)=>t+n,e):0}};a(d,"instance",new d);let i=d;class v{constructor(){a(this,"_ul")}clear(){this._ul&&(this._ul.innerHTML="")}}class u extends v{constructor(e){super(),this._ul=e}render(e){this.clear(),e.forEach((t,n)=>{var l;const r=document.createElement("li");r.classList.add("d-flex","justify-content-between","mb-3");const o=document.createElement("p");o.textContent=`${t.name} | ${t.price} Gel`;const c=document.createElement("button");c.type="button",c.textContent="Delete",c.classList.add("btn","btn-danger"),c.addEventListener("click",()=>{i.instance.removeProduct(n),this.render(i.instance.elements)}),r.append(o,c),(l=this._ul)==null||l.append(r)}),i.instance.getLength!==0&&this.show_sum(i.instance.getSum)}show_sum(e){var r;const t=document.createElement("p");t.textContent=`Total: ${e.toString()}`;const n=document.createElement("hr");(r=this._ul)==null||r.append(n,t)}change_delivery_type(e,t){i.instance.deliveryLocalStorage()?(e.checked=!0,t.checked=!1):(e.checked=!1,t.checked=!0)}}class S{constructor(e,t,n){this.id=e,this.name=t,this.price=n}}class p{constructor(e,t){this.date=e,this.type=t}}class L extends p{constructor(e,t){super(e,"Home"),this.address=t}}class w extends p{constructor(e){super(new Date,"Shop"),this.shopId=e}}function m(s,e){const t=new u(s);if(e.checked){const n=new Date,r=new Date(n);r.setDate(n.getDate()+10),i.instance.setDelivery(new L(r,"Tbilisi"))}else i.instance.setDelivery(new w(4));t.render(i.instance.elements)}function h(s,e,t,n,r){if(!s.value.trim()||!e.valueAsNumber)return;m(t,n),r.addProduct(new S(r.getLength,s.value.trim(),Math.abs(e.valueAsNumber))),new u(t).render(r.elements),s.value="",e.value="",s.blur(),e.blur()}function b(){const s=document.querySelector("form"),e=s.querySelector('input[type="text"]'),t=s.querySelector('input[type="number"]'),n=s.querySelector("#add-item"),r=s.querySelector("#deliveryType_1"),o=s.querySelector("#deliveryType_2"),c=document.querySelector(".items"),l=new u(c);l.render(i.instance.elements),l.change_delivery_type(r,o),s.addEventListener("submit",y=>{y.preventDefault(),h(e,t,c,r,i.instance)}),n.addEventListener("click",()=>{h(e,t,c,r,i.instance)}),s.addEventListener("change",()=>{m(c,r)})}document.addEventListener("DOMContentLoaded",b);
